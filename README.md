# üè¶ –ö—ç—à-–º–∞—à–∏–Ω | ATM

**–≠–º—É–ª—è—Ç–æ—Ä –±–∞–Ω–∫–æ–º–∞—Ç–∞ —Å –±–∞–∑–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏**  
–ü—Ä–æ–µ–∫—Ç –∏–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –±–∞–Ω–∫–æ–º–∞—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –≤–∫–ª—é—á–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π.

## –ó–∞—á–µ–º???
- **–ö–ª–∞—Å—Å—ã** ‚Üí **–∏–∑ —á–µ–≥–æ —Å–æ—Å—Ç–æ–∏—Ç** (—Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∏—Ö —Å–≤—è–∑–∏).  
- **Sequence-–¥–∏–∞–≥—Ä–∞–º–º—ã** ‚Üí **–∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç** (–ª–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è).  
- **Use Case** ‚Üí **—á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å** (–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).  

## –î–∏–∞–≥—Ä–∞–º–º—ã
### 1. Class Diagram (`–∏–∑ —á–µ–≥–æ —Å–æ—Å—Ç–æ–∏—Ç`)
![image](https://github.com/user-attachments/assets/291acccf-135c-42e8-8a26-b715289c56f2)

### 2. Sequence Diagram (`–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç`)
![image](https://github.com/user-attachments/assets/92db4574-7b08-44ca-a70c-c473797a548e)

### 3. Use Case (`—á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å`)
![image](https://github.com/user-attachments/assets/a7af480e-c9cb-46f9-ab9c-132bef32aa91)


# üè¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö

### 1. üë§ `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö —Å–∏—Å—Ç–µ–º—ã.

*   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Ö —Ä–æ–ª–µ–π.
*   **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
    *   `user_id` (SERIAL PRIMARY KEY): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
    *   `login` (VARCHAR(50) UNIQUE NOT NULL): –õ–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).
    *   `password_hash` (VARCHAR(100) NOT NULL): –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π). **–ü–∞—Ä–æ–ª–∏ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è!**
    *   `full_name` (VARCHAR(100)): –ü–æ–ª–Ω–æ–µ –∏–º—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ).
    *   `role` (VARCHAR(10) CHECK (role IN ('client', 'admin'))): –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`client` –∏–ª–∏ `admin`).
    *   `is_blocked` (BOOLEAN DEFAULT FALSE): –§–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω).
    *   `created_at` (TIMESTAMP DEFAULT CURRENT_TIMESTAMP): –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è).
*   **–°–≤—è–∑–∏:** –Ø–≤–ª—è–µ—Ç—Å—è "—Ä–æ–¥–∏—Ç–µ–ª–µ–º" –¥–ª—è —Å—á–µ—Ç–æ–≤ (`accounts`) –∏ –∏—Å—Ç–æ—Ä–∏–∏ –≤—Ö–æ–¥–æ–≤ (`login_history`).

---

### 2. üíº `accounts` - –°—á–µ—Ç–∞

–°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å—á–µ—Ç–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

*   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£—á–µ—Ç –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
*   **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
    *   `account_id` (SERIAL PRIMARY KEY): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Å—á–µ—Ç–∞ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
    *   `user_id` (INTEGER NOT NULL REFERENCES users(user_id)): –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å—á–µ—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ `users` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è).
    *   `account_number` (VARCHAR(20) UNIQUE NOT NULL): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "408...", —É–Ω–∏–∫–∞–ª—å–Ω—ã–π, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).
    *   `balance` (DECIMAL(15, 2) DEFAULT 0.00 CHECK (balance >= 0)): –¢–µ–∫—É—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å—á–µ—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.00, –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º).
    *   `currency` (VARCHAR(3) DEFAULT 'RUB'): –í–∞–ª—é—Ç–∞ —Å—á–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, RUB, USD; –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é RUB).
    *   `created_at` (TIMESTAMP DEFAULT CURRENT_TIMESTAMP): –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—á–µ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è).
*   **–°–≤—è–∑–∏:**
    *   **–û–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º (1:M)** —Å `users`: –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ —Å—á–µ—Ç–æ–≤.
    *   –Ø–≤–ª—è–µ—Ç—Å—è "—Ä–æ–¥–∏—Ç–µ–ª–µ–º" –¥–ª—è –∫–∞—Ä—Ç (`cards`), —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (`transactions`) –∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (`transfers`).

---

### 3. üí≥ `cards` - –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ö–∞—Ä—Ç—ã

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç–∞—Ö, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ —Å—á–µ—Ç–∞–º.

*   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏.
*   **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
    *   `card_id` (SERIAL PRIMARY KEY): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
    *   `account_id` (INTEGER UNIQUE NOT NULL REFERENCES accounts(account_id)): –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—á–µ—Ç –≤ `accounts`, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫–∞—Ä—Ç–∞ (—É–Ω–∏–∫–∞–ª—å–Ω–∞—è, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è). **–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–¥–Ω–∞ –∫–∞—Ä—Ç–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –∫ –æ–¥–Ω–æ–º—É —Å—á–µ—Ç—É, –∏ –æ–¥–∏–Ω —Å—á–µ—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –æ—Å–Ω–æ–≤–Ω—É—é –∫–∞—Ä—Ç—É (–ø–æ —Ç–∞–∫–æ–π –ª–æ–≥–∏–∫–µ).**
    *   `card_number` (VARCHAR(16) UNIQUE NOT NULL): –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).
    *   `expiry_date` (VARCHAR(5) NOT NULL): –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "05/25", –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).
    *   `cvv` (VARCHAR(3) NOT NULL): CVV-–∫–æ–¥ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π). **–í–Ω–∏–º–∞–Ω–∏–µ:** –í —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö CVV –æ–±—ã—á–Ω–æ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è!
    *   `is_blocked` (BOOLEAN DEFAULT FALSE): –§–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫–∞—Ä—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞).
    *   `pin_hash` (VARCHAR(100) NOT NULL): –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π PIN-–∫–æ–¥ –∫–∞—Ä—Ç—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).
*   **–°–≤—è–∑–∏:**
    *   **–û–¥–∏–Ω –∫ –æ–¥–Ω–æ–º—É (1:1)** —Å `accounts`: –û–¥–∏–Ω —Å—á–µ—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ–¥–Ω—É –∫–∞—Ä—Ç—É (–≤ –¥–∞–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏).

---

### 4. üí∏ `transactions` - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–ó–∞–ø–∏—Å–∏ –æ–±–æ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –ø–æ —Å—á–µ—Ç–∞–º (–ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è, —Å–ø–∏—Å–∞–Ω–∏—è, —á–∞—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∞).

*   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ —Å—á–µ—Ç—É.
*   **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
    *   `transaction_id` (SERIAL PRIMARY KEY): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
    *   `account_id` (INTEGER NOT NULL REFERENCES accounts(account_id)): –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—á–µ—Ç –≤ `accounts`, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–æ—à–ª–∞ –æ–ø–µ—Ä–∞—Ü–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è).
    *   `amount` (DECIMAL(15, 2) NOT NULL): –°—É–º–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è).
    *   `transaction_type` (VARCHAR(20) CHECK (transaction_type IN ('deposit', 'withdraw', 'transfer'))): –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (`deposit` - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ, `withdraw` - —Å–Ω—è—Ç–∏–µ, `transfer` - —É—á–∞—Å—Ç–∏–µ –≤ –ø–µ—Ä–µ–≤–æ–¥–µ).
    *   `description` (VARCHAR(255)): –û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ).
    *   `created_at` (TIMESTAMP DEFAULT CURRENT_TIMESTAMP): –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è).
*   **–°–≤—è–∑–∏:**
    *   **–û–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º (1:M)** —Å `accounts`: –û–¥–∏–Ω —Å—á–µ—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

---

### 5. ‚ÜîÔ∏è `transfers` - –ü–µ—Ä–µ–≤–æ–¥—ã

–î–µ—Ç–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –º–µ–∂–¥—É –¥–≤—É–º—è —Å—á–µ—Ç–∞–º–∏.

*   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π, –æ—Ç—Ä–∞–∂–∞—é—â–∏—Ö –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é—é –æ–ø–µ—Ä–∞—Ü–∏—é.
*   **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
    *   `transfer_id` (SERIAL PRIMARY KEY): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –ø–µ—Ä–µ–≤–æ–¥–∞ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
    *   `from_account_id` (INTEGER NOT NULL REFERENCES accounts(account_id)): –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—á–µ—Ç-–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –≤ `accounts` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è).
    *   `to_account_id` (INTEGER NOT NULL REFERENCES accounts(account_id)): –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—á–µ—Ç-–ø–æ–ª—É—á–∞—Ç–µ–ª—å –≤ `accounts` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è).
    *   `amount` (DECIMAL(15, 2) NOT NULL CHECK (amount > 0)): –°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è, –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å > 0).
    *   `commission` (DECIMAL(15, 2) DEFAULT 0.00): –ö–æ–º–∏—Å—Å–∏—è –∑–∞ –ø–µ—Ä–µ–≤–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.00).
    *   `status` (VARCHAR(20) DEFAULT 'completed'): –°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `completed`, `pending`; –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `completed`).
    *   `created_at` (TIMESTAMP DEFAULT CURRENT_TIMESTAMP): –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–µ—Ä–µ–≤–æ–¥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è).
*   **–°–≤—è–∑–∏:**
    *   **–ú–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º (M:M)** –º–µ–∂–¥—É `accounts` (—á–µ—Ä–µ–∑ —ç—Ç—É —Ç–∞–±–ª–∏—Ü—É): –°—á–µ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º, –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º –≤–æ –º–Ω–æ–≥–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–∞—Ö.

---

### 6. üë£ `login_history` - –ò—Å—Ç–æ—Ä–∏—è –í—Ö–æ–¥–æ–≤

–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º—É.

*   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤—Ö–æ–¥–æ–≤.
*   **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
    *   `login_id` (SERIAL PRIMARY KEY): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–ø–∏—Å–∏ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
    *   `user_id` (INTEGER NOT NULL REFERENCES users(user_id)): –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `users` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è).
    *   `ip_address` (VARCHAR(15) NOT NULL): IP-–∞–¥—Ä–µ—Å, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª–∞ –ø–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).
    *   `login_time` (TIMESTAMP DEFAULT CURRENT_TIMESTAMP): –í—Ä–µ–º—è –ø–æ–ø—ã—Ç–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è).
    *   `is_success` (BOOLEAN NOT NULL): –ë—ã–ª–∞ –ª–∏ –ø–æ–ø—ã—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).
*   **–°–≤—è–∑–∏:**
    *   **–û–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º (1:M)** —Å `users`: –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ –∑–∞–ø–∏—Å–µ–π –æ –ø–æ–ø—ã—Ç–∫–∞—Ö –≤—Ö–æ–¥–∞.

---

### 7. üíπ `currency_rates` - –ö—É—Ä—Å—ã –í–∞–ª—é—Ç

–•—Ä–∞–Ω–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –æ–±–º–µ–Ω–∞ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤–∞–ª—é—Ç–∞–º–∏.

*   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –∏–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–æ–≤.
*   **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
    *   `rate_id` (SERIAL PRIMARY KEY): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–ø–∏—Å–∏ –∫—É—Ä—Å–∞ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
    *   `from_currency` (VARCHAR(3) NOT NULL): –ò—Å—Ö–æ–¥–Ω–∞—è –≤–∞–ª—é—Ç–∞ (–∫–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä, USD; –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è).
    *   `to_currency` (VARCHAR(3) NOT NULL): –¶–µ–ª–µ–≤–∞—è –≤–∞–ª—é—Ç–∞ (–∫–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä, RUB; –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è).
    *   `rate` (DECIMAL(10, 4) NOT NULL): –û–±–º–µ–Ω–Ω—ã–π –∫—É—Ä—Å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).
    *   `updated_at` (TIMESTAMP DEFAULT CURRENT_TIMESTAMP): –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è).
    *   `UNIQUE (from_currency, to_currency)`: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—ã –≤–∞–ª—é—Ç –¥–ª—è –∫—É—Ä—Å–∞.
*   **–°–≤—è–∑–∏:** –°–ø—Ä–∞–≤–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## ‚ö° –ò–Ω–¥–µ–∫—Å—ã

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —á–∞—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∏—Å–∫ —Å—á–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ —Å—á–µ—Ç—É) —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã:

*   `idx_accounts_user_id` –Ω–∞ `accounts(user_id)`
*   `idx_transactions_account_id` –Ω–∞ `transactions(account_id)`
*   `idx_transfers_from_account` –Ω–∞ `transfers(from_account_id)`
*   `idx_transfers_to_account` –Ω–∞ `transfers(to_account_id)`
*   `idx_login_history_user` –Ω–∞ `login_history(user_id)`

---

## üß™ –ù–∞—á–∞–ª—å–Ω—ã–µ –î–∞–Ω–Ω—ã–µ

–í –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã:

*   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: `admin`, `ivanov`, `petrov`.
*   –°—á–µ—Ç–∞:
    *   `40817810000000000001` (RUB, 15000.00) –¥–ª—è `ivanov`
    *   `40817810000000000002` (USD, 500.00) –¥–ª—è `ivanov`
    *   `40817810000000000003` (RUB, 7500.00) –¥–ª—è `petrov`
*   –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç:
    *   USD/RUB: 75.50
    *   RUB/USD: 0.0132
    *   EUR/RUB: 85.25
    *   RUB/EUR: 0.0117

---
